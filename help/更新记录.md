# 更新记录

## v1.1.0 (2026-01-10)

### 🚀 新功能

- **功能开关命令**：支持动态启用/禁用 jm 功能
  - 开启：`jm开启` / `jmstart` / `jmSTART`
  - 关闭：`jm关闭` / `jmstop` / `jmSTOP`
  - 关闭后所有 `jm<id>` 命令不会触发下载
- **批量下载支持**：一条消息中可包含多个 `jm123` `jm456` 等，自动去重后批量下载
- **队列上限保护**：队列最多容纳 20 个任务，满时自动拒绝并提示用户
- **PDF 分卷功能**：
  - 按章节分别生成 PDF
  - 单卷不超过 200 张图片
  - 单卷不超过 50MB（超限自动拆分）
  - 文件名长度限制为 30 字符

### ⚡ 性能优化

- **直通 PDF 封装**：jpg/jpeg/png 格式图片直接封装为 PDF，无需转换，速度更快
- **长图并行读取**：`merge_long_images` 支持 `io_workers` 参数，chunk 并行读取降低内存占用
- **计时功能**：新增 `TIMING_ENABLED` 开关，可显示各阶段耗时（默认关闭）

### 🔧 配置调整

| 配置项 | 旧值 | 新值 |
|--------|------|------|
| API 超时 | 20 秒 | 60 秒 |
| 清理延迟 | 86400 秒 (1天) | 600 秒 (10分钟) |

- 触发规则放宽：消息中**包含** `jm数字` 即可触发，无需完全匹配
---

## v1.0.0 (初始版本)

- 基础 JM 漫画下载与 PDF 生成
- 队列管理 (jm队列 / jm取消)
- 帮助命令 (jm帮助)
